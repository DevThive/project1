<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-analytics.js";
      import { getDatabase } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyD6AvglKAL3qW2jR46aZXVBT5PtGFqfh-4",
        authDomain: "sparta-94f20.firebaseapp.com",
        projectId: "sparta-94f20",
        storageBucket: "sparta-94f20.appspot.com",
        messagingSenderId: "616741352088",
        appId: "1:616741352088:web:73ed988c6b8ef4184bd6ed",
        measurementId: "G-MFETGLLRMX",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
      const analytics = getAnalytics(app);

      const likeButton = document.getElementById("likeButton");

      likeButton.addEventListener("click", async () => {
        // Firestore에서 좋아요를 토글하거나 관리하는 코드를 작성합니다.
        const postRef = db.collection("posts").doc("post_id"); // 'post_id'를 실제 게시물 ID로 대체합니다.

        try {
          const postDoc = await postRef.get();
          const postData = postDoc.data();

          if (postData.likes.includes(userId)) {
            // 이미 좋아요를 눌렀을 경우, 좋아요 취소
            await postRef.update({
              likes: firebase.firestore.FieldValue.arrayRemove(userId),
            });
          } else {
            // 좋아요를 누르지 않았을 경우, 좋아요 추가
            await postRef.update({
              likes: firebase.firestore.FieldValue.arrayUnion(userId),
            });
          }
        } catch (error) {
          console.error("좋아요 업데이트 오류:", error);
        }
      });
    </script>
  </head>
  <body>
    <button id="likeButton">좋아요</button>
  </body>
</html>
